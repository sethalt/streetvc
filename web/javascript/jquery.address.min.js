(function(e){e.address=function(){var t=function(t){var n=e.extend(e.Event(t),function(){var t={},n=e.address.parameterNames();for(var r=0,i=n.length;r<i;r++){t[n[r]]=e.address.parameter(n[r])}return{value:e.address.value(),path:e.address.path(),pathNames:e.address.pathNames(),parameterNames:n,parameters:t,queryString:e.address.queryString()}}.call(e.address));e(e.address).trigger(n);return n},n=function(e){return Array.prototype.slice.call(e)},r=function(t,n,r){e().bind.apply(e(e.address),Array.prototype.slice.call(arguments));return e.address},i=function(t,n){e().unbind.apply(e(e.address),Array.prototype.slice.call(arguments));return e.address},s=function(){return R.pushState&&P.state!==x},o=function(){return("/"+U.pathname.replace(new RegExp(P.state),"")+U.search+(u()?"#"+u():"")).replace(X,"/")},u=function(){var e=U.href.indexOf("#");return e!=-1?U.href.substr(e+1):""},a=function(){return s()?o():u()},f=function(){try{return top.document!==x&&top.document.title!==x&&top.jQuery!==x&&top.jQuery.address!==x&&top.jQuery.address.frames()!==false?top:window}catch(e){return window}},l=function(){return"javascript"},c=function(e){e=e.toString();return(P.strict&&e.substr(0,1)!="/"?"/":"")+e},h=function(e,t){return parseInt(e.css(t),10)},p=function(){if(!et){var e=a(),t=decodeURI(st)!=decodeURI(e);if(t){if(F&&B<7){U.reload()}else{if(F&&!J&&P.history){W(m,50)}st=e;d(D)}}}},d=function(e){W(v,10);return t(A).isDefaultPrevented()||t(e?O:M).isDefaultPrevented()},v=function(){if(P.tracker!=="null"&&P.tracker!==T){var t=e.isFunction(P.tracker)?P.tracker:I[P.tracker],n=(U.pathname+U.search+(e.address&&!s()?e.address.value():"")).replace(/\/\//,"/").replace(/^\/$/,"");if(e.isFunction(t)){t(n)}else if(e.isFunction(I.urchinTracker)){I.urchinTracker(n)}else if(I.pageTracker!==x&&e.isFunction(I.pageTracker._trackPageview)){I.pageTracker._trackPageview(n)}else if(I._gaq!==x&&e.isFunction(I._gaq.push)){I._gaq.push(["_trackPageview",decodeURI(n)])}}},m=function(){var e=l()+":"+D+";document.open();document.writeln('<html><head><title>"+q.title.replace(/\'/g,"\\'")+"</title><script>var "+N+' = "'+encodeURIComponent(a()).replace(/\'/g,"\\'")+(q.domain!=U.hostname?'";document.domain="'+q.domain:"")+'";</'+"script></head></html>');document.close();";if(B<7){K.src=e}else{K.contentWindow.location.replace(e)}},g=function(){if(G&&Y!=-1){var e,t,n=G.substr(Y+1).split("&");for(e=0;e<n.length;e++){t=n[e].split("=");if(/^(autoUpdate|history|strict|wrap)$/.test(t[0])){P[t[0]]=isNaN(t[1])?/^(true|yes)$/i.test(t[1]):parseInt(t[1],10)!==0}if(/^(state|tracker)$/.test(t[0])){P[t[0]]=t[1]}}G=T}st=a()},y=function(){if(!tt){tt=_;g();e('a[rel*="address:"]').address();if(P.wrap){var n=e("body"),r=e("body > *").wrapAll('<div style="padding:'+(h(n,"marginTop")+h(n,"paddingTop"))+"px "+(h(n,"marginRight")+h(n,"paddingRight"))+"px "+(h(n,"marginBottom")+h(n,"paddingBottom"))+"px "+(h(n,"marginLeft")+h(n,"paddingLeft"))+'px;" />').parent().wrap('<div id="'+N+'" style="height:100%;overflow:auto;position:relative;'+(j&&!window.statusbar.visible?"resize:both;":"")+'" />');e("html, body").css({height:"100%",margin:0,padding:0,overflow:"hidden"});if(j){e('<style type="text/css" />').appendTo("head").text("#"+N+"::-webkit-resizer { background-color: #fff; }")}}if(F&&!J){var i=q.getElementsByTagName("frameset")[0];K=q.createElement((i?"":"i")+"frame");K.src=l()+":"+D;if(i){i.insertAdjacentElement("beforeEnd",K);i[i.cols?"cols":"rows"]+=",0";K.noResize=_;K.frameBorder=K.frameSpacing=0}else{K.style.display="none";K.style.width=K.style.height=0;K.tabIndex=-1;q.body.insertAdjacentElement("afterBegin",K)}W(function(){e(K).bind("load",function(){var e=K.contentWindow;st=e[N]!==x?e[N]:"";if(st!=a()){d(D);U.hash=st}});if(K.contentWindow[N]===x){m()}},50)}W(function(){t("init");d(D)},1);if(!s()){if(F&&B>7||!F&&J){if(I.addEventListener){I.addEventListener(k,p,D)}else if(I.attachEvent){I.attachEvent("on"+k,p)}}else{z(p,50)}}if("state"in window.history){e(window).trigger("popstate")}}},b=function(){if(decodeURI(st)!=decodeURI(a())){st=a();d(D)}},w=function(){if(I.removeEventListener){I.removeEventListener(k,p,D)}else if(I.detachEvent){I.detachEvent("on"+k,p)}},E=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},S=function(){var e={},t=E(navigator.userAgent);if(t.browser){e[t.browser]=true;e.version=t.version}if(e.chrome){e.webkit=true}else if(e.webkit){e.safari=true}return e},x,T=null,N="jQueryAddress",C="string",k="hashchange",L="init",A="change",O="internalChange",M="externalChange",_=true,D=false,P={autoUpdate:_,history:_,strict:_,frames:_,wrap:D},H=S(),B=parseFloat(H.version),j=H.webkit||H.safari,F=!e.support.opacity,I=f(),q=I.document,R=I.history,U=I.location,z=setInterval,W=setTimeout,X=/\/{2,9}/g,V=navigator.userAgent,J="on"+k in I,K,Q,G=e("script:last").attr("src"),Y=G?G.indexOf("?"):-1,Z=q.title,et=D,tt=D,nt=_,rt=D,it={},st=a();if(F){B=parseFloat(V.substr(V.indexOf("MSIE")+4));if(q.documentMode&&q.documentMode!=B){B=q.documentMode!=8?7:8}var ot=q.onpropertychange;q.onpropertychange=function(){if(ot){ot.call(q)}if(q.title!=Z&&q.title.indexOf("#"+a())!=-1){q.title=Z}}}if(R.navigationMode){R.navigationMode="compatible"}if(document.readyState=="complete"){var ut=setInterval(function(){if(e.address){y();clearInterval(ut)}},50)}else{g();e(y)}e(window).bind("popstate",b).bind("unload",w);return{bind:function(e,t,i){return r.apply(this,n(arguments))},unbind:function(e,t){return i.apply(this,n(arguments))},init:function(e,t){return r.apply(this,[L].concat(n(arguments)))},change:function(e,t){return r.apply(this,[A].concat(n(arguments)))},internalChange:function(e,t){return r.apply(this,[O].concat(n(arguments)))},externalChange:function(e,t){return r.apply(this,[M].concat(n(arguments)))},baseURL:function(){var e=U.href;if(e.indexOf("#")!=-1){e=e.substr(0,e.indexOf("#"))}if(/\/$/.test(e)){e=e.substr(0,e.length-1)}return e},autoUpdate:function(e){if(e!==x){P.autoUpdate=e;return this}return P.autoUpdate},history:function(e){if(e!==x){P.history=e;return this}return P.history},state:function(e){if(e!==x){P.state=e;var t=o();if(P.state!==x){if(R.pushState){if(t.substr(0,3)=="/#/"){U.replace(P.state.replace(/^\/$/,"")+t.substr(2))}}else if(t!="/"&&t.replace(/^\/#/,"")!=u()){W(function(){U.replace(P.state.replace(/^\/$/,"")+"/#"+t)},1)}}return this}return P.state},frames:function(e){if(e!==x){P.frames=e;I=f();return this}return P.frames},strict:function(e){if(e!==x){P.strict=e;return this}return P.strict},tracker:function(e){if(e!==x){P.tracker=e;return this}return P.tracker},wrap:function(e){if(e!==x){P.wrap=e;return this}return P.wrap},update:function(){rt=_;this.value(st);rt=D;return this},title:function(e){if(e!==x){W(function(){Z=q.title=e;if(nt&&K&&K.contentWindow&&K.contentWindow.document){K.contentWindow.document.title=e;nt=D}},50);return this}return q.title},value:function(e){if(e!==x){e=c(e);if(e=="/"){e=""}if(st==e&&!rt){return}st=e;if(P.autoUpdate||rt){if(d(_)){return this}if(s()){R[P.history?"pushState":"replaceState"]({},"",P.state.replace(/\/$/,"")+(st===""?"/":st))}else{et=_;if(j){if(P.history){U.hash="#"+st}else{U.replace("#"+st)}}else if(st!=a()){if(P.history){U.hash="#"+st}else{U.replace("#"+st)}}if(F&&!J&&P.history){W(m,50)}if(j){W(function(){et=D},1)}else{et=D}}}return this}return c(st)},path:function(e){if(e!==x){var t=this.queryString(),n=this.hash();this.value(e+(t?"?"+t:"")+(n?"#"+n:""));return this}return c(st).split("#")[0].split("?")[0]},pathNames:function(){var e=this.path(),t=e.replace(X,"/").split("/");if(e.substr(0,1)=="/"||e.length===0){t.splice(0,1)}if(e.substr(e.length-1,1)=="/"){t.splice(t.length-1,1)}return t},queryString:function(e){if(e!==x){var t=this.hash();this.value(this.path()+(e?"?"+e:"")+(t?"#"+t:""));return this}var n=st.split("?");return n.slice(1,n.length).join("?").split("#")[0]},parameter:function(t,n,r){var i,s;if(n!==x){var o=this.parameterNames();s=[];n=n===x||n===T?"":n.toString();for(i=0;i<o.length;i++){var u=o[i],a=this.parameter(u);if(typeof a==C){a=[a]}if(u==t){a=n===T||n===""?[]:r?a.concat([n]):[n]}for(var f=0;f<a.length;f++){s.push(u+"="+a[f])}}if(e.inArray(t,o)==-1&&n!==T&&n!==""){s.push(t+"="+n)}this.queryString(s.join("&"));return this}n=this.queryString();if(n){var l=[];s=n.split("&");for(i=0;i<s.length;i++){var c=s[i].split("=");if(c[0]==t){l.push(c.slice(1).join("="))}}if(l.length!==0){return l.length!=1?l:l[0]}}},parameterNames:function(){var t=this.queryString(),n=[];if(t&&t.indexOf("=")!=-1){var r=t.split("&");for(var i=0;i<r.length;i++){var s=r[i].split("=")[0];if(e.inArray(s,n)==-1){n.push(s)}}}return n},hash:function(e){if(e!==x){this.value(st.split("#")[0]+(e?"#"+e:""));return this}var t=st.split("#");return t.slice(1,t.length).join("#")}}}();e.fn.address=function(t){e(this).each(function(n){if(!e(this).data("address")){e(this).on("click",function(n){if(n.shiftKey||n.ctrlKey||n.metaKey||n.which==2){return true}var r=n.currentTarget;if(e(r).is("a")){n.preventDefault();var i=t?t.call(r):/address:/.test(e(r).attr("rel"))?e(r).attr("rel").split("address:")[1].split(" ")[0]:e.address.state()!==undefined&&!/^\/?$/.test(e.address.state())?e(r).attr("href").replace(new RegExp("^(.*"+e.address.state()+"|\\.)"),""):e(r).attr("href").replace(/^(#\!?|\.)/,"");e.address.value(i)}}).on("submit",function(n){var r=n.currentTarget;if(e(r).is("form")){n.preventDefault();var i=e(r).attr("action"),s=t?t.call(r):(i.indexOf("?")!=-1?i.replace(/&$/,""):i+"?")+e(r).serialize();e.address.value(s)}}).data("address",true)}});return this}})(jQuery)